# ML System Design Doc
## Дизайн ML системы - Automatic image generation pipeline

> Работа над данным проектом ведется в сотрудничестве с [Wonderslide](https://wonderslide.com) – сервисом для генерации оформления для презентаций с помощью AI.

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

**Бизнес-цель:** Для оформления презентаций требуются разного рода изображения, в том числе изображения различных интерьеров и экстерьеров. При генерации оформления все картинки подбираются из внутреннего стока изображений. Основная цель данного проекта – пополнение данного стока сгенерированным контентом с помощью автоматического пайплайна.

**Почему станет лучше, чем сейчас, от использования ML:** В данный момент все картинки в стоке создаются "вручную". То есть все необходимые предметы и помещения в действительности фотографируются. Это сильно осложняет обеспечение разнообразия и объема контента в стоке. Сгенерированные же изображения решают данную проблему и не требуют ручного труда. Однако стандартные уже на данный момент инструменты для генерации предполагают написание промпта для каждого отдельного изображения. Автоматический же пайплайн предполагает, что данный процесс также возьмет на себя AI, а именно одна из существующих на данный момент LLM.

**Что будем считать успехом итерации с точки зрения бизнеса:** Требуется получить 10 тыс. хороших изображений, отражающих 13 различных тематик, таких как "Business and office", "Medicine and health", "Trainings and Education" и т.п. Среди данных изображений примерно 60% должны составлять интерьеры, 20% – экстерьеры и 20% – крупные планы предметов, относящихся к теме. Качество сгенерированного контента будет вручную оцениваться экспертами.

#### 1.2. Бизнес-требования и ограничения  

**Целевое решение:** Автоматический пайплайн для генерации изображений.

**Логика работы:**
- На вход в пайплайн подается общая тематика, на которую требуется сгенерировать изображения (например, "Business and office"), а также тип изображений, которые нужно получить (на данный момент рассматривается 3 типа: интерьеры - interiors, экстерьеры - exteriors и крупные планы предметов - items).
- На выходе получаем пулл с заданным количеством изображений.

**Бизнес-ограничения:**
- Необходимо разработать пайплайн, который затем можно будет перезапустить без участия разработчиков, для генерации изображений на новые тематики (не входящие в 13 выбранных заранее).
- Пайплайн желательно должен использовать open source решения как для генерации изображений, так и для работы с промптами к ним.

**Критерии успеха:** Критерием успеха служит позитивная обратная связь от эксперта, оценивающего сгенерированный контент на заранее обозначенные тематики.

**Возможные пути развития проекта:**
- Генерация других типов изображений не только интерьерного характера.
- Генерация изображений "на лету". То есть не пополнение стока за счет сгенерированного контента, а генерация непосредственно для конкретной презентации поданный в сервис.

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

**На закрытие каких БТ подписываемся в данной итерации:** 
- сбор информации от заказчиков (уточнение требований и ожиданий от результата), 
- определение алгоритма генерации изображений, выбор необходимых инструментов/моделей для его реализации, 
- подготовка кода пайплайна и документации к нему для понимания его работы и возможности перезапуска,
- подготовка пулла изображений на заданные тематики для пополнения стока.

**Результат с точки зрения качества кода и воспроизводимости решения:** Отдельный репозиторий со скриптами, составляющми паплайн, на Python, примерами работы и документацией.

#### 1.4. Предпосылки решения  

**Проблема:** В настоящий момент уходит много времени на "ручное" пополнение внутреннего стока изображений заказчика. Так, например, чтобы получить 500 различных изображений офисов, нужно реально обойти большое количество помещений и сделать снимки. Кроме того, в данный момент заказчики уже попробовали использовать стандартные решения для генерации, но это также потребовало времени и трудозатрат дизайнеров для написания промптов для генеративной сети. 

